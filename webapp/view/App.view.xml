<mvc:View
    controllerName="fioritodoapp.controller.App"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
>
    <App>
        <Page>
            <customHeader>
                <f:ShellBar title="TodoLsit" />
            </customHeader>
            <content>
                <f:DynamicPage>
                    <f:header>
                        <f:DynamicPageHeader pinnable="false">
                            <Input
                                class="todoInput"
                                id="addTodoItemInput"
                                placeholder="What needs to be done"
                                change=".addTodo"
                                value="{/newTodo}"
                                valueLiveUpdate="true"
                            />
                        </f:DynamicPageHeader>
                    </f:header>
                    <f:content>
                        <List
                            id="listTodo"
                            items="{ path: '/todos', events: { change: '.updateItemsLeftCount' } }"
                            mode="None"
                            growing="true"
                            growingScrollToLoad="true"
                            showNoData="false"
                            showSeparators="None"
                        >
                            <headerToolbar>
                                <OverflowToolbar
                                    id="toolbar"
                                    class="sapUiSizeCompact"
                                    visible="{= !${view>/isMobile} }"
                                >
                                    <SearchField
                                        id="searchTodoItemsInput"
                                        liveChange=".onSearch"
                                        width="20rem"
                                    />
                                    <SegmentedButton
                                        selectedKey="all"
                                        selectionChange=".onFilter"
                                        class="sapMSegmentedButtonNoAutoWidth"
                                    >
                                        <items>
                                            <SegmentedButtonItem
                                                text="All"
                                                key="all"
                                            />
                                            <SegmentedButtonItem
                                                text="Active"
                                                key="active"
                                            />
                                            <SegmentedButtonItem
                                                text="Completed"
                                                key="completed"
                                            />
                                        </items>
                                    </SegmentedButton>

                                    <Button
                                        id="clearCompleted"
                                        enabled="{/itemsRemovable}"
                                        icon="sap-icon://delete"
                                        text="{i18n>CLEAR_COMPLETED}"
                                        press=".clearCompleted"
                                    />
                                </OverflowToolbar>
                            </headerToolbar>
                            <infoToolbar>
                                <OverflowToolbar
                                    visible="{= !!${view>/filterText} }"
                                    active="false"
                                >
                                    <Label text="{view>/filterText}" />
                                </OverflowToolbar>
                            </infoToolbar>
                            <CustomListItem>
                                <HBox>
                                    <CheckBox selected="{completed}" />
                                    <VBox
                                        justifyContent="Center"
                                        width="100%"
                                    >
                                        <Text
                                            text="{title}"
                                            class='list-item-content'
                                        />
                                    </VBox>
                                    <ToolbarSpacer />
                                    <Button
                                        text="delete"
                                        press=".onOpenDailog"
                                    />
                                </HBox>
                                <customData>
                                    <core:CustomData
                                        key="todo-item-completed"
                                        value="{title}"
                                        writeToDom="true"
                                    />
                                </customData>
                                <customData>
                                    <core:CustomData
                                        key="todo-item-completed"
                                        value="{= String(${completed})}"
                                        writeToDom="true"
                                    />
                                </customData>
                            </CustomListItem>
                        </List>
                    </f:content>
                </f:DynamicPage>
            </content>
            <footer>
            <OverflowToolbar
                    id="toolbar-footer"
                    visible="{= !!${view>/isMobile} }"
                >
                    <SegmentedButton
                        selectedKey="all"
                        selectionChange=".onFilter"
                        class="sapMSegmentedButtonNoAutoWidth"
                    >
                        <items>
                            <SegmentedButtonItem
                                text="All"
                                key="all"
                            />
                            <SegmentedButtonItem
                                text="Active"
                                key="active"
                            />
                            <SegmentedButtonItem
                                text="Completed"
                                key="completed"
                            />
                        </items>
                    </SegmentedButton>
                    <ToolbarSpacer />
                    <Button
                        id="clearCompleted-footer"
                        enabled="{/itemsRemovable}"
                        icon="sap-icon://delete"
                        text="{i18n>CLEAR_COMPLETED}"
                        press=".clearCompleted"
                    />
                </OverflowToolbar>
            </footer>
        </Page>
    </App>
</mvc:View>
